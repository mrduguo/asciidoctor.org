<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/asciidoctor.org/stylesheets/styles.css"><script src="/asciidoctor.org/javascripts/vendor/custom.modernizr.js"></script><title>Plain-text diagrams take shape in Asciidoctor! | Asciidoctor</title><link href="/feed.atom" rel="alternate" title="AsciiDoctor.org News Feed" type="application/atom+xml"><meta name="author" content="Pepijn Van Eeckhoudt"><link rel="author" href="/humans.txt"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@asciidoctor"><meta name="twitter:title" content="Plain-text diagrams take shape in Asciidoctor!"><meta name="twitter:description" content="You write in plain text.
You code in plain text.
How about creating diagrams in plain text too?
Now you can using Asciidoctor Diagram!
Introduction
Asciidoctor is a fantastic tool..."><meta name="twitter:url" content="https://mrduguo.github.io/asciidoctor.org/news/2014/02/18/plain-text-diagrams-in-asciidoctor/"></head><body class="antialiased"><nav class="top-bar"><ul class="title-area"><li class="name"><h1><a href="/">Asciidoctor</a></h1></li><li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li></ul><section class="top-bar-section"><ul class="right"><li><a href="/asciidoctor.org/">About</a></li><li class="divider"></li><li><a href="/asciidoctor.org/news/">News</a></li><li class="divider"></li><li><a href="http://gist.asciidoctor.org">Gist</a></li><li class="divider"></li><li><a href="https://github.com/asciidoctor">Code</a></li><li class="divider"></li><li><a href="http://discuss.asciidoctor.org">Discuss</a></li><li class="divider"></li><li><a href="/asciidoctor.org/docs/">Docs</a></li><li class="divider"></li><li class="has-form"><a class="button" href="/asciidoctor.org/docs/asciidoc-writers-guide/">Get Writing!</a></li></ul></section></nav><div class="container"><div class="row"><div class="large-12 columns"><div id="content"><article class="post"><header class="entry-header"><h1 class="title"><a href="/news/2014/02/18/plain-text-diagrams-in-asciidoctor/">Plain-text diagrams take shape in Asciidoctor!</a></h1><h4><em>by</em> <span class="author">Pepijn Van Eeckhoudt</span> - <time class="pubdate" datetime="2014-02-18T16:41:04-07:00">Tuesday, February 18, 2014</time></h4></header><div class="entry-content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>You write in plain text.
You code in plain text.
How about creating diagrams in plain text too?
Now you can using <a href="https://github.com/asciidoctor/asciidoctor-diagram">Asciidoctor Diagram</a>!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://asciidoctor.org">Asciidoctor</a> is a fantastic tool to use when writing technical documentation.
It allows you to spend more time focusing on your content rather than struggling with WYSIWYG tools.</p>
</div>
<div class="paragraph">
<p>One task that still pulls your focus away, and is more difficult than it should be, is integrating technical diagrams into your documents.
It involves launching a UML or diagramming tool, pushing pixels around the screen to draw the diagrams, exporting the result to a web-friendly image format and linking to them from your source document.
The many benefits that AsciiDoc provides in terms of visual consistency, ease of collaboration, etc. are not available when you are working with diagrams.</p>
</div>
<div class="paragraph">
<p>All that changes today with the announcement of the Asciidoctor Diagram extension.
<a href="https://github.com/asciidoctor/asciidoctor-diagram">Asciidoctor Diagram</a> integrates existing plain text syntax diagramming tools into the Asciidoctor processing.
That means you can embed the source code for your diagrams <em>directly</em> into your documents!</p>
</div>
<div class="paragraph">
<p>The first version of Asciidoctor Diagram supports the following diagram languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://ditaa.sourceforge.net">ditaa</a></p>
</li>
<li>
<p><a href="http://www.graphviz.org/content/dot-language">Graphviz dot</a></p>
</li>
<li>
<p><a href="http://www.plantuml.com">PlantUML</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These “lightweight diagram languages” are to graphical diagrams what AsciiDoc is to HTML.
Another way of saying it:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/asciidoctor.org/images/language-analogy-diagram.png" alt="language analogy diagram">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="your-first-plain-text-diagram"><a class="anchor" href="#your-first-plain-text-diagram"></a>Your first plain-text diagram</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The simplest way to add diagrams to your documents is by using diagram blocks.
Just add a listing block to your file using the appropriate syntax name (<code>ditaa</code>, <code>graphviz</code> or <code>plantuml</code>) as the block name (aka style).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>[ditaa]
----
                   +-------------+
                   | Asciidoctor |-------+
                   |  Diagram    |       |
                   +-------------+       | PNG out
                       ^                 |
                       | ditaa in        |
                       |                 v
 +--------+   +--------+----+    /----------------\
 |        | --+ Asciidoctor +--&gt; |                |
 |  Text  |   +-------------+    |Beautiful output|
 |Document|   |   !magic!   |    |                |
 |     {d}|   |             |    |                |
 +---+----+   +-------------+    \----------------/
     :                                   ^
     |          Lots of work             |
     +-----------------------------------+
----</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the Asciidoctor Diagram extension processes this type of block, it will read the body of the block, pass it to the ditaa library, write the resulting image to disk and generate an image block.
Here&#8217;s how it appears in the rendered document:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/asciidoctor.org/images/sample-ditaa-diagram.png" alt="sample ditaa diagram">
</div>
</div>
<div class="paragraph">
<p><strong>Magic!</strong></p>
</div>
<div class="paragraph">
<p>Generating one of these images is fairly quick, but if you start adding lots of diagrams to your document the processing time can start adding up.
Asciidoctor Diagram optimizes the processing by keeping track of diagram metadata in *.cache files and will only regenerate the images if the diagram source code was modified.
This keeps incremental rendering of documents a speedy process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="controlling-the-output"><a class="anchor" href="#controlling-the-output"></a>Controlling the output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default Asciidoctor Diagram creates PNG images and calculates an output file name automatically based on the diagram source code.
This behavior can be overridden using the <code>target</code> and <code>format</code> attributes.
You can specify these attributes as the first and second positional attributes or as explicitly named attributes.
An SVG file with a specific name a Graphviz diagram can be generated as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>[graphviz, dot-example, svg]
----
digraph g {
    a -&gt; b
    b -&gt; c
    c -&gt; d
    d -&gt; a
}
----</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the magic happens, you&#8217;ll see:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/asciidoctor.org/images/sample-graphviz-diagram.png" alt="sample graphviz diagram">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Asciidoctor Diagram bundles both the ditaa and PlantUML libraries and will use them to generate diagrams.
In order to generate diagrams using Graphviz, you must install it separately (meaning the <code>dot</code> command must be available on your PATH).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Asciidoctor Diagram turns the diagram blocks into image blocks and applies any additional attributes.
This means you can use the normal Asciidoctor facilities to control the positioning of the generated image.
Block titles and IDs can also be assigned in the same way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>[[main-classes]]
.The PlantUML block extension class
[plantuml, sample-plantuml-diagram, alt="Class diagram", width=135, height=118]
----
class BlockProcessor
class PlantUmlBlock
BlockProcessor &lt;|-- PlantUmlBlock
----</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s what gets rendered:</p>
</div>
<div id="main-classes" class="imageblock">
<div class="content">
<img src="/asciidoctor.org/images/sample-plantuml-diagram.png" alt="Class diagram" width="135" height="118">
</div>
<div class="title">The PlantUML block extension class</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="including-external-diagrams"><a class="anchor" href="#including-external-diagrams"></a>Including external diagrams</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It might not always be desirable to embed the source code for diagrams in your document.
External diagrams can also be processed using the block macro syntax.
This is very similar to how you typically include images in your documents.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>plantuml::classes.txt[format=svg, alt="Class diagram", width=300, height=200]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-the-extension"><a class="anchor" href="#enabling-the-extension"></a>Enabling the extension</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Asciidoctor 0.1.4 does not yet allow extensions to be enabled via the command line.
That is a feature coming in Asciidoctor 1.5.0.
Until then, the easiest way to enable the extensions is to use a short wrapper script.
The following script, <code>asciidoctor-diagram</code>, loads and registers the Asciidoctor Diagram extension, then invokes Asciidoctor in the same way as the <code>asciidoctor</code> command.</p>
</div>
<div class="listingblock">
<div class="title"><code>asciidoctor-diagram</code> launch script</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="ruby"><span class="doctype">#!/usr/bin/env ruby</span>

require <span class="string"><span class="delimiter">'</span><span class="content">asciidoctor</span><span class="delimiter">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
require <span class="string"><span class="delimiter">'</span><span class="content">asciidoctor/cli/options</span><span class="delimiter">'</span></span>
require <span class="string"><span class="delimiter">'</span><span class="content">asciidoctor/cli/invoker</span><span class="delimiter">'</span></span>

require <span class="string"><span class="delimiter">'</span><span class="content">asciidoctor-diagram</span><span class="delimiter">'</span></span> <i class="conum" data-value="2"></i><b>(2)</b>

invoker = <span class="constant">Asciidoctor</span>::<span class="constant">Cli</span>::<span class="constant">Invoker</span>.new <span class="predefined-constant">ARGV</span> <i class="conum" data-value="3"></i><b>(3)</b>
invoker.invoke!
exit invoker.code</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Loads Asciidoctor</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Loads and registers the Asciidoctor Diagram extensions</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Invoke the Asciidoctor CLI</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Put the <code>asciidoctor-diagram</code> script on your PATH, make it executable and use it in place of the <code>asciidoctor</code> command.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ asciidoctor-diagram my-doc-with-cool-diagrams.adoc</pre>
</div>
</div>
<div class="paragraph">
<p>After running the <code>asciidoctor-diagram</code> script on your document, go check out the cool diagrams it made for you!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="go-play"><a class="anchor" href="#go-play"></a>Go play!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now it&#8217;s time to go play with Asciidoctor Diagram.
Explore what you can do with it and how it can be improved.
To help you get started, check out <a href="https://github.com/asciidoctor/asciidoctor-diagram/blob/master/examples/features.adoc">these examples</a> in the Asciidoctor Diagram repository.
We look forward to hearing from you on the Asciidoctor <a href="http://discuss.asciidoctor.org">discussion list</a> or the Asciidoctor Diagram <a href="https://github.com/asciidoctor/asciidoctor-diagram/issues">issue tracker</a>.</p>
</div>
<div class="paragraph">
<p>Together, we can make diagrams and documentation come to life out of plain ol' text!</p>
</div>
</div>
</div></div><footer class="entry-footer"><div class="tags"><i class="label fa fa-tags"></i><a href="/news/tag/extension/">extension</a>, <a href="/news/tag/announcement/">announcement</a></div></footer><hr><div id="comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
            var disqus_shortname = 'asciidoctor';
            var disqus_url = "https://mrduguo.github.io/asciidoctor.org/news/2014/02/18/plain-text-diagrams-in-asciidoctor/";
            var disqus_developer = null;
            var disqus_identifier = "ab0a1463c9b2dc6497c7a7ada1b832ae005e3db4";
            (function() {
              var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=asciidoctor">comments powered by Disqus.</a></noscript>
          </div></article></div></div></div></div><footer><div class="row full-width"><div class="large-6 columns"><div class="row" style="margin-bottom: 1em"><div class="large-5 columns"><p><i class="fa fa-fw fa-download"></i> Download: <a class="rubygem" href="https://rubygems.org/gems/asciidoctor"><img src="https://img.shields.io/gem/v/asciidoctor.svg" alt="Asciidoctor gem version" style="margin-top: -2px"></a><br><i class="fa fa-fw fa-github"></i> Development: <a href="https://github.com/asciidoctor">GitHub</a><br><i class="fa fa-fw fa-group"></i> Discussions: <a href="http://discuss.asciidoctor.org">Nabble</a></p></div><div class="large-7 columns"><p><i class="fa fa-fw fa-comments"></i> Chat: <a href="https://gitter.im/asciidoctor/asciidoctor">Gitter</a><br><i class="fa fa-fw fa-twitter"></i> Twitter: <a class="twitter" href="https://twitter.com/asciidoctor">@asciidoctor</a><br><i class="fa fa-fw fa-google-plus-sign"></i> Google+: <a href="https://plus.google.com/116431294697916948181" rel="publisher">Asciidoctor</a></p></div></div></div><div class="large-6 large-text-right columns"><p style="margin-bottom: 1em">Thanks to our <a href="/supporters/">supporters</a> and <a href="/contributors/">contributors</a>!</p><p>Composed in AsciiDoc. Styled by Foundation. Baked with Awestruct.<br>&copy; Asciidoctor Project 2019. Content licensed under CC BY 3.0.</p></div></div></footer><script>document.write('<script src=' + ('__proto__' in {} ? '/asciidoctor.org/javascripts/vendor/zepto' : '/asciidoctor.org/javascripts/vendor/jquery') + '.js><\/script>')</script><script>$('.toggle-navigation').click(function() { $('.navigation').toggle(); $('.content').toggleClass('large-8'); $('.content').toggleClass('large-12'); $('.toolbar').toggleClass('off'); });</script><script src="/asciidoctor.org/javascripts/foundation/foundation.js"></script><script src="/asciidoctor.org/javascripts/foundation/foundation.topbar.js"></script><script>$(document).foundation();</script><script>var langs = navigator.languages;if (langs) { $('article[lang]').each(function(i, article) {   var lang = article.getAttribute('lang');   if (!langs.find(function(candidate) { return candidate === lang || candidate.startsWith(lang + '-'); })) {     $(article).hide();   } });}</script><script>!function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);}(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-38215684-1','auto'),ga('send','pageview');</script></body></html>